VntgApp.directive('VtgFileInput',function(){return{restrict:'C',link:function(scope,el){var el_id=el.attr("id");$("#"+el_id).live('change',function(){scope.$apply(function(){scope.fileField=$("#"+el_id).val().replace(/\\/g,'/').replace(/.*\//,'');$("#"+el_id).closest(".input-group").children("input[type='text']").val(scope.fileField);});});}}});VntgApp.directive('VtgProcessing',function(){return{restrict:'C',link:function(scope,element,attrs){scope.$watch(attrs.ngModel,function(value){if(value==true){jQuery(function(){var loadingText="Processing request...";if(scope.submittingWF){loadingText="Submitting Price Validation Workflow ...";}
jQuery(element).html('<div class="vtg-overlay"></div>'
+'<div class="vtg-overlay-loading"><img style="vertical-align: middle" src="/images/icon_wait.gif" /><span style="display: inline-block; vertical-align: middle">'+loadingText+'</span></div>');});}else{jQuery(function(){jQuery(element).empty();});}});}}});VntgApp.directive('VtgModalStatus',function(){return{restrict:'C',link:function(scope,element,attrs){scope.showModalSatus=function(value,backdrop){backdrop=angular.isDefined(backdrop)?backdrop:true;var elm=jQuery(element);if(Boolean(value)){if(elm.find(".modal").length===0){elm.html("<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\""+" backdrop=\""+backdrop+"\">"+"<div class=\"modal-dialog\">"+"<div class=\"modal-content\">"+"<div class=\"modal-body\">"+"<div class=\"ajax_loader\">"+"<img style=\"vertical-align: middle\" src=\"/images/icon_wait.gif\" />"+"<span class=\"status-text\" style=\"display: inline-block; vertical-align: middle\">"+value+"</span>"+"</div>"+"</div>"+"</div><!-- /.modal-content -->"+"</div><!-- /.modal-dialog -->"+"</div><!-- /.modal-dialog -->");}else{elm.find(".status-text").html(value);}
elm.find(".modal").modal({show:true,backdrop:backdrop});}else{if(Boolean(elm)){elm.find(".modal").modal('hide');}}};}};});VntgApp.directive('VtgModalAlert',function(){return{restrict:'C',link:function(scope,element){scope.showModalAlert=function(title,body,reload){if(!Boolean(title)||!Boolean(body))
return;var elm=jQuery(element);if(elm.find(".modal").length==0){elm.html("<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">"
+"<div class=\"modal-dialog\">"
+"<div class=\"modal-content\">"
+"<div class=\"modal-header\">"
+"<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>"
+"<h4 class=\"modal-title\">{{title}}</h4>"
+"</div>"
+"<div class=\"modal-body\"></div>"
+"<div class=\"modal-footer\">"
+"<button type=\"button\" class=\"btn btn-sm\" data-dismiss=\"modal\">Ok</button>"
+"</div>"
+"</div><!-- /.modal-content -->"
+"</div><!-- /.modal-dialog -->"
+"</div><!-- /.modal-dialog -->");};elm.find("h4.modal-title").html(title);elm.find("div.modal-body").html(body);elm.find(".modal").modal('show');if(reload){elm.find("button.btn").unbind().on('click',function(){window.location.reload();});}}}}});VntgApp.directive('VtgModalAlertWithCallBack',function(){return{restrict:'C',link:function(scope,element){scope.showModalAlertWithCallBack=function(title,body,callbacks){if(!title||!body||!callbacks){return;}
var elm=jQuery(element);if(elm.find(".modal").length===0){elm.html("<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">"+"<div class=\"modal-dialog\">"+"<div class=\"modal-content\">"+"<div class=\"modal-header\">"+"<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>"+"<h4 class=\"modal-title\">{{title}}</h4>"+"</div>"+"<div class=\"modal-body\"></div>"+"<div class=\"modal-footer\"></div>"+"</div><!-- /.modal-content -->"+"</div><!-- /.modal-dialog -->"+"</div><!-- /.modal-dialog -->");}
var buttons="";var counter=0;angular.forEach(callbacks,function(value,key){var tmpClass="";if(Boolean(value)){tmpClass="btn"+counter++;elm.find("button."+tmpClass).die("click");if(Boolean(value.fn)){elm.find("button."+tmpClass).live("click",value.fn);}else if(Boolean(value.href)){if(Boolean(value.href.blank)){elm.find("button."+tmpClass).live("click",function(){window.open(value.href.url);});}else{elm.find("button."+tmpClass).live("click",function(){window.location=value.href.url;});}}
if(value.primary){tmpClass+=" btn-primary";}}
buttons+="<button type=\"button\" class=\"btn btn-sm "+tmpClass+"\"";if(value&&value.href&&value.href.closeModal||value===null||value.closeModal){buttons+="data-dismiss=\"modal\"";}
buttons+=">"+key+"</button>";});elm.find("h4.modal-title").html(title);elm.find("div.modal-body").html(body);elm.find("div.modal-footer").html(buttons);elm.find(".modal").modal('show');};scope.hideModalAlert=function(){jQuery(element).find(".modal").modal('hide');};}};});